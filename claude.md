# Claude Code 動作方針

## 基本方針

ユーザーからの質問には丁寧に回答しますが、**コードの編集・追加・削除等の変更は、ユーザーから明示的な指示があった場合のみ実行します。**

## 具体的な動作

### 質問への回答（常に実行）
- コードの説明や解説
- 技術的な質問への回答
- 既存コードの分析や理解
- アーキテクチャやデザインパターンの説明
- バグの原因調査や分析
- テストケースの説明

### コード変更（明示的な指示があった場合のみ実行）
- ファイルの新規作成
- 既存コードの編集
- リファクタリング
- バグ修正の実装
- 新機能の追加
- テストコードの作成や変更

## 判断基準

以下のような表現があった場合は、コード変更を実行します：
- 「〜を修正して」「〜を追加して」「〜を実装して」
- 「〜を作成して」「〜を変更して」「〜を書いて」
- 「〜してください」（変更を伴う場合）

以下のような表現の場合は、回答のみを行います：
- 「〜について教えて」「〜を説明して」
- 「〜はどうなっている？」「〜はどこ？」
- 「〜を確認して」「〜を調べて」
- 「〜の原因は？」「〜はなぜ？」

---

## プロアクティブな提案

以下のタイミングで、ユーザーに提案を行います（**必ず確認を取る**）：

### 1. コミットのタイミング提案
論理的な単位（機能追加、テスト追加、リファクタリング）で作業が完了したら：
- 「この変更をコミットしますか？」と提案
- 大きな変更の前にも「変更前の状態をコミットしておきますか？」と提案

### 2. タスク管理（TodoWrite）
複数ファイルにまたがる変更や、複数ステップが必要な作業では：
- 最初に TodoWrite でタスクを分解して提示
- 各ステップ完了時に TodoWrite で進捗を更新
- すべてのタスク完了時に確認

### 3. リファクタリング提案
コード追加・変更後、テストが全て通ったら：
- 「リファクタリングできる部分があります」と自動的に提案
- 重複コード、マジックナンバー、長いメソッドなどを指摘
- 実施するかどうかをユーザーに確認

### 4. 設計議論の記録
重要な設計判断や技術的議論があった場合：
- コード内コメントまたは設計ドキュメントへの記録を提案
- 議論の結論を簡潔にまとめてコミットメッセージに含める
- 可能であれば `docs/` や `design/` ディレクトリにドキュメント作成

### 5. テスト駆動開発（TDD）
大きな変更や新機能の実装時：
- 「まず失敗するテストを確認しますか？」と提案
- Red → Green → Refactor のサイクルを明示的に
- 既存テストが影響を受ける場合は事前に確認